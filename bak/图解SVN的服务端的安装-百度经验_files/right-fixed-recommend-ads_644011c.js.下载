define("article:widget/ad/right-fixed-recommend-ads/right-fixed-recommend-ads.es",function(t,e,i){"use strict";var o=t("common-jquery:widget/lib/jquery/jquery.js"),n=(t("common:widget/ui/log/log.js"),t("common:widget/lib/fis/event/event.js").eventCenter);i.exports={init:function(t){var e=o(".right-fixed-related-wrap");this.fixedScrollTop=0,this.topSpan=46,t.warningHeight&&(this.topSpan+=t.warningHeight),this.contentElem=e.children(".content"),this.contentElemOffsetTop=this.contentElem.offset().top-this.topSpan,this.contentHeight=this.contentElem[0].offsetHeight,e.height(this.contentHeight),this.relatedExp=o("#relate-explist"),this.reCalcFixedScrollTop(),this.eventHandler()},reCalcFixedScrollTop:function(){var t=0;this.relatedExp[0]&&(t=this.relatedExp.offset().top+this.relatedExp[0].offsetHeight-this.contentHeight-this.topSpan,0>t&&(t=0),this.fixedScrollTop=t)},updateScrollPosition:function(){var t=0,e=document.documentElement.scrollTop;e>=this.contentElemOffsetTop?(this.contentElem.addClass("fixed"),this.fixedScrollTop&&(t=this.fixedScrollTop-e,0>=t?this.contentElem.css("top",this.topSpan+t):this.contentElem.css("top",this.topSpan))):this.contentElem.removeClass("fixed")},rePositionFixedTop:function(){this.reCalcFixedScrollTop(),this.updateScrollPosition()},eventHandler:function(){var t=this;n.on("expOuterContainer/expand",function(){setTimeout(function(){t.rePositionFixedTop()},200)}),n.on("warningTip/close",function(e){t.topSpan-=e.height,t.rePositionFixedTop()}),o(window).on("scroll",function(){t.updateScrollPosition()}),o(".exp-image-default.lazy-load-img").on("load",function(){t.rePositionFixedTop()})}}});